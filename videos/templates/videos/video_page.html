{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<div class="container max-w-5xl mx-auto px-4 py-12">
    <h1 class="text-4xl font-bold text-center mb-8 text-indigo-900">{{ page.title }}</h1>

    <div class="relative bg-black rounded-2xl overflow-hidden shadow-2xl mb-12" style="padding-top: 56.25%;">
        {% if page.embed_type == 1 %}
            <iframe src="https://play.boomstream.com/{{ page.boomstream_code }}"
                    class="absolute inset-0 w-full h-full"
                    frameborder="0" allowfullscreen></iframe>
        {% elif page.embed_type == 2 %}
            <script src="https://play.boomstream.com/{{ page.boomstream_code }}/config.jsonp" async></script>
            <script src="https://play.boomstream.com/assets/javascripts/biframesdk.js?v=1.1.1" async></script>
            <span data-boomstream-code="{{ page.boomstream_code }}"
                  data-boomstream-mode="adaptive"
                  data-boomstream-use-fullscreen-mode="0"
                  data-boomstream-border-radius="10px"
                  class="absolute inset-0 w-full h-full"></span>
        {% elif page.embed_type == 3 %}
            <iframe src="https://play.boomstream.com/{{ page.boomstream_code }}?color=false"
                    allow="autoplay; fullscreen; picture-in-picture; encrypted-media; screen-wake-lock;"
                    frameborder="0"
                    class="absolute inset-0 w-full h-full rounded-2xl"></iframe>
        {% endif %}
    </div>

    {% if page.intro %}
        <div class="prose prose-lg max-w-4xl mx-auto text-gray-700 mb-12">
            {{ page.intro|richtext }}
        </div>
    {% endif %}

    <div class="text-center text-gray-500">
        <p>{{ page.views }} просмотров | {{ page.date|date:"d.m.Y" }}</p>
        {% if page.category %}
            <p class="mt-2">Категория: <span class="text-indigo-600 font-medium">{{ page.category.title }}</span></p>
        {% endif %}
    </div>
</div>
{% endblock %}